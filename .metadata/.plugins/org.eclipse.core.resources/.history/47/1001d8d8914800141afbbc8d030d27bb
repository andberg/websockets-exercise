package se.berglund.messagehandlers;

import java.util.ArrayList;

import javax.json.Json;
import javax.json.JsonArray;
import javax.json.JsonReader;

import se.berglund.datastorage.WhiteboardManager;
import se.berglund.models.Message;
import se.berglund.models.Whiteboard;

public class MessageHandler {
	private Message message; 
	
	public MessageHandler(Message message){
		this.message = message; 
	}
		
	public Message handleMessage(){
		Message message = new Message();
		if ((this.message.getType()).contains("get-all-whiteboards")) {
			ArrayList<Whiteboard> allWhiteboards = WhiteboardManager.getAllWhiteboards(); 
			message.setType("get-all-whiteboards");
			
			message.setData(allWhiteboards); 
		}
		return message;
	}
	
	protected JsonArray parseArrayToJsonArray(ArrayList<Whiteboard> whiteboards){
		JsonArray array = Json.createArrayBuilder().build();
		
		for(Whiteboard wb: whiteboards){
			array.add(Json.createObjectBuilder().add("id", "name").add(wb.getId(), wb.getName())); 
		}
			     .add(Json.createObjectBuilder()
			         .add("type", "home")
			         .add("number", "212 555-1234"))
			     .add(Json.createObjectBuilder()
			         .add("type", "fax")
			         .add("number", "646 555-4567"))
			     .build();
		return null; 
	}
}
